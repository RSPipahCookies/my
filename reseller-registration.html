<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PipahCookies Reseller Registration</title>
<style>
  /* Styling remains the same as your original file */
  body { font-family: 'Poppins', sans-serif; background: linear-gradient(180deg, #fff5e1 0%, #ffe6c9 100%); margin: 0; padding: 0; color: #333; }
  header { text-align: center; padding: 2rem 1rem 1rem; }
  header img { width: 120px; border-radius: 50%; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
  header h1 { margin-top: 1rem; font-size: 1.8rem; color: #b45309; }
  .form-container { max-width: 500px; background: #fff; margin: 1rem auto 3rem; padding: 2rem; border-radius: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
  .form-container h2 { text-align: center; color: #c96a00; margin-bottom: 1.5rem; font-size: 1.4rem; }
  .form-group { margin-bottom: 1rem; }
  .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; color: #6d4c41; }
  
  /* Update styling for all text input types, including textarea */
  .form-group input[type="text"], 
  .form-group input[type="tel"], 
  .form-group textarea { 
    width: 100%; 
    padding: 12px; 
    border: 1px solid #e0e0e0; 
    border-radius: 8px; 
    box-sizing: border-box; 
    font-size: 1rem; 
    transition: border-color 0.3s; 
    min-height: 50px; /* Added min-height for textarea */
  }

  .form-group input:focus, .form-group textarea:focus { border-color: #b45309; outline: none; box-shadow: 0 0 0 3px rgba(180, 83, 9, 0.2); }
  
  /* Styling untuk soalan radio baru */
  .radio-group { 
    margin-top: 1.5rem; 
    margin-bottom: 1.5rem; 
    padding: 15px; 
    border: 1px solid #ffe0b2; /* Light orange border */
    border-radius: 8px;
    background-color: #fff8e1; /* Very light background for contrast */
  }
  .radio-group > label { 
    font-weight: 700; 
    color: #b45309; 
    margin-bottom: 10px; 
    display: block;
    font-size: 1.05rem;
  }
  .radio-group div {
      display: flex;
      gap: 20px;
      align-items: center;
      margin-top: 8px;
  }
  .radio-group input[type="radio"] { 
    /* Reset and custom styling for radio button */
    margin-right: 5px;
    width: auto;
  }

  button { width: 100%; padding: 15px; background-color: #b45309; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1.1rem; font-weight: 700; margin-top: 1.5rem; transition: background-color 0.3s; }
  button:hover { background-color: #8c4207; }
  .info-text { margin-top: 1.5rem; text-align: center; font-size: 0.9rem; color: #795548; }
</style>
</head>
<body>

<header>
  <img src="images/Header2.jpg" alt="PipahCookies Logo">
  <h1>Portal Reseller PipahCookies</h1>
</header>

<div class="form-container">
  <h2>Borang Pendaftaran Reseller Baru</h2>
  <form id="registrationForm">
    <div class="form-group">
      <label for="name">Nama Penuh</label>
      <input type="text" id="name" name="name" required>
    </div>
    
    <div class="form-group">
      <label for="phone">Nombor WhatsApp (cth: 0123456789)</label>
      <input type="tel" id="phone" name="phone" 
             placeholder="Sila masukkan no whatsapp anda" 
             pattern="[0-9]{10,11}" 
             title="Sila masukkan 10 atau 11 digit nombor tanpa sebarang sengkang atau ruang" 
             required>
    </div>
    
    <div class="form-group">
      <label for="exp">Ada pengalaman menjual produk makanan online? </label>
      <textarea id="exp" name="exp" rows="1" required></textarea>
    </div>

    <div class="form-group">
      <label for="reason">Kenapa ingin menjadi reseller PipahCookies? </label>
      <textarea id="reason" name="reason" rows="3" required></textarea>
    </div>

    <div class="radio-group">
        <label>Anda ingin mula sekarang?</label>
        <div>
            <input type="radio" id="start-yes" name="start-now" value="Ya" required>
            <label for="start-yes">Ya</label>
        </div>
        <div>
            <input type="radio" id="start-later" name="start-now" value="Nanti kemudian">
            <label for="start-later">Nanti kemudian</label>
        </div>
    </div>

    <button type="submit"> Submit ðŸš€</button>
  </form>
  <p class="info-text">Setelah berjaya, anda akan diberikan link untuk Reseller Portal *tidak boleh disebar,hanya untuk kegunaan reseller berdaftar sahaja, Terima Kasih.*</p>
</div>

<script>
    const ADMIN_WHATSAPP_NUMBER = "601121243407"; // Admin's number (Must be in International format: 60xxxx)

    // IMPROVED: Helper function to format the phone number for DISPLAY in the WhatsApp message (e.g., 01x-xxxxxxx)
    function formatPhoneNumberForDisplay(phone) {
        let cleanedPhone = phone.replace(/[^0-9]/g, ''); // Remove non-digits
        
        // If it starts with '60', remove it (e.g., 6012... -> 12...)
        if (cleanedPhone.startsWith('60') && cleanedPhone.length > 2) {
            cleanedPhone = cleanedPhone.substring(2);
        }
        
        // Ensure it starts with '0' for local display (e.g., 12... -> 012...)
        if (!cleanedPhone.startsWith('0')) {
            cleanedPhone = '0' + cleanedPhone;
        }

        return cleanedPhone;
    }

    document.getElementById('registrationForm').addEventListener('submit', function(e) {
        e.preventDefault();

        const name = document.getElementById('name').value.trim();
        const rawPhone = document.getElementById('phone').value.trim();
        // Use the improved function
        const phoneForMessage = formatPhoneNumberForDisplay(rawPhone); 
        
        const experience = document.getElementById('exp').value.trim();
        const reason = document.getElementById('reason').value.trim(); 
        
        const startNowElement = document.querySelector('input[name="start-now"]:checked');
        const startNow = startNowElement ? startNowElement.value : 'Tidak Dijawab';

        // Basic validation for new fields
        if (experience.length < 5) {
            alert('Sila berikan butiran pengalaman menjual online anda (minimum 5 huruf).');
            return;
        }
        if (reason.length < 5) {
            alert('Sila jelaskan mengapa anda ingin menjadi reseller PipahCookies (minimum 5 huruf).');
            return;
        }
        
        // NEW: Confirmation Dialog before redirecting
        const confirmationMessage = 
            `Pendaftaran Berjaya!\n\n` +
            `Anda akan diarah ke WhatsApp untuk menghantar maklumat ini kepada Admin (${ADMIN_WHATSAPP_NUMBER}).\n\n` +
            `Sila tekan 'OK' untuk teruskan atau 'Cancel' untuk membatalkan.`;

        if (!confirm(confirmationMessage)) {
            // User clicked Cancel
            alert('Pendaftaran dibatalkan. Sila cuba lagi.');
            return;
        }
        
        // PREPARE WHATSAPP MESSAGE
        const msg = 
            `ðŸŽ‰ *Permohonan Reseller PipahCookies* ðŸŽ‰\n` +
            `---------------------------------\n` +
            `ðŸ‘¤ Nama: ${name}\n` +
            `ðŸ“± WhatsApp: ${phoneForMessage}\n` + // Display as 01x-xxxxxxx
            `---------------------------------\n` +
            `*Pengalaman Menjual Online:*\n${experience}\n\n` +
            `*Sebab Menjadi Reseller:*\n${reason}\n` +
            `---------------------------------\n` +
            `âœ… Mula Sekarang?: ${startNow}\n` +
            `\nTerima kasih!`;

        const encodedMsg = encodeURIComponent(msg);
        
        // IMPORTANT: The WhatsApp link MUST use the country code (60) for the recipient (ADMIN).
        const waLink = `https://wa.me/${ADMIN_WHATSAPP_NUMBER}?text=${encodedMsg}`;

        // Redirect/Open the WhatsApp link
        window.open(waLink, '_blank');
    });
</script>
</body>
</html>
